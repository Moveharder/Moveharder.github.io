class t{constructor(t){const e=document.createElement("div");e.style.cssText="\n        position: absolute;\n        bottom: 16px;\n        width: 100px;\n        height: 100px;\n        background: rgba(120, 120, 120, 0.3);\n        border-radius: 50%;\n        left: 50%;\n        transform: translateX(-50%);\n        box-sizing: border-box;\n        filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, .25));\n        z-index: 11\n      ";const o=document.createElement("div");if(o.style.cssText="\n        position: absolute;\n        left: 20px;\n        top: 20px;\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        background: rgba(255, 255, 255, .6);\n        box-shadow: 0px 1px 2px rgba(200, 200, 200, .25);\n      ",e.appendChild(o),document.getElementById(t.container||"joystick_ctrl").appendChild(e),this.domElement=o,this.maxRadius=t.maxRadius||40,this.maxRadiusSquared=this.maxRadius*this.maxRadius,this.onMove=t.onMove,this.game=t.game,this.origin={left:this.domElement.offsetLeft,top:this.domElement.offsetTop},this.rotationDamping=t.rotationDamping||.06,this.moveDamping=t.moveDamping||.01,void 0!==this.domElement){const t=this;"ontouchstart"in window?this.domElement.addEventListener("touchstart",(function(e){t.tap(e)})):this.domElement.addEventListener("mousedown",(function(e){t.tap(e)}))}}getMousePosition(t){return{x:t.targetTouches?t.targetTouches[0].pageX:t.clientX,y:t.targetTouches?t.targetTouches[0].pageY:t.clientY}}tap(t){t=t||window.event,this.offset=this.getMousePosition(t);const e=this;"ontouchstart"in window?(document.ontouchmove=function(t){e.move(t)},document.ontouchend=function(t){e.up(t)}):(document.onmousemove=function(t){e.move(t)},document.onmouseup=function(t){e.up(t)})}move(t){t=t||window.event;const e=this.getMousePosition(t);let o=e.x-this.offset.x,n=e.y-this.offset.y;const i=o*o+n*n;if(i>this.maxRadiusSquared){const t=Math.sqrt(i);o/=t,n/=t,o*=this.maxRadius,n*=this.maxRadius}this.domElement.style.top=`${n+this.domElement.clientHeight/2}px`,this.domElement.style.left=`${o+this.domElement.clientWidth/2}px`;const s=-(n-this.origin.top+this.domElement.clientHeight/2)/this.maxRadius,m=(o-this.origin.left+this.domElement.clientWidth/2)/this.maxRadius;void 0!==this.onMove&&this.onMove.call(this.game,s,m)}up(){"ontouchstart"in window?(document.ontouchmove=null,document.touchend=null):(document.onmousemove=null,document.onmouseup=null),this.domElement.style.top=`${this.origin.top}px`,this.domElement.style.left=`${this.origin.left}px`,this.onMove.call(this.game,0,0)}}export{t as J};
