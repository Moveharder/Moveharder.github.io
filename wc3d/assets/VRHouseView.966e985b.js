import{r as e,z as t,v as o,s as a,S as n,m as i,W as r,a2 as s,a3 as m,a4 as l,K as c,Q as d,c as p,a1 as u,x as w,M as f,L as y,a5 as b,o as h}from"./vendor.d2781f4b.js";import{C as g}from"./CameraAnimation.f6d1e21f.js";import{_ as P}from"./index.40bc08d4.js";const j=P({__name:"VRHouseView",setup(P){const j=window.innerWidth,_=window.innerHeight;let v=!1,x=e(null),C=null,z="room1",O="room_cube_mesh",B="location_btn_mesh",E="closer_circle_mesh",I={room1:{materials:[],btnPosition:[-16,0,-9],circlePosition:[-20,-15,-11],next:"room2"},room2:{materials:[],btnPosition:[-10,-10,5],circlePosition:[-10,-10,-10],next:"room3"},room3:{materials:[],btnPosition:[15,-10,0],circlePosition:[-10,-10,-10],next:"room1"}},L=(new t).setPath("images/vrhouse/");["left","right","top","bottom","front","back"].map((e=>{let t=L.load(`room1/${e}.jpg`),n=L.load(`room2/${e}.jpg`),i=L.load(`room3/${e}.jpg`);I.room1.materials.push(new o({transparent:!0,opacity:.1,map:t,side:a})),I.room2.materials.push(new o({transparent:!0,opacity:.1,map:n,side:a})),I.room3.materials.push(new o({transparent:!0,opacity:.1,map:i,side:a}))}));let M=[],N=null;const T=new n,$=new i(90,j/_,.1,1e3);$.position.set(0,0,.1);const k=new r({transparent:!0});k.setSize(j,_),k.setClearColor(new s(16777215));let A=new m,D=new l;function F(e=!1){if(e){M=[];let e=T.getObjectByName(O),t=T.getObjectByName(B),o=T.getObjectByName(E);T.remove(e,t,o)}let t=new w(100,100,100);N=new f(t,I[z].materials),N.position.set(0,0,0),N.geometry.scale(1,1,-1),N.name=O,N.material.map((e=>{u.to(e,{opacity:1,duration:2})})),T.add(N);let o=new w(2,2,2),n=new y({color:16777215,side:a,transparent:!0,opacity:.4}),i=new f(o,n);var r;i.position.set(...I[z].btnPosition),i.name=B,T.add(i),M.push(i),r=i,u.fromTo(r.position,{y:-2,duration:1,repeat:-1,yoyo:!0,ease:"power2"},{y:2,duration:1,repeat:-1,yoyo:!0,ease:"power2"}),u.to(r.rotation,{y:Math.PI,duration:2,repeat:-1,onComplete:()=>{}});let s=new b(2,30),m=new y({color:16777215,side:a}),l=new f(s,m);l.position.set(...I[z].circlePosition),l.rotateX(.5*Math.PI),l.name=E,T.add(l),M.push(l),C.update(),v=!1}function H(){k.render(T,$),C.update(),window.requestAnimationFrame(H)}return window.addEventListener("mousedown",(function(e){if(v)return;D.x=e.clientX/j*2-1,D.y=-(e.clientY/_*2-1),A.setFromCamera(D,$);let t=A.intersectObjects(T.children,!1);if(t.length>0){let e=t[0];e.distance;if(e.object.name==B&&(v=!0,e.object.material.color=new s(16711680),z=I[z].next,N.material.map((e=>{u.to(e,{opacity:0,duration:1})})),setTimeout((()=>{F(!0)}),1e3)),e.object.name==E){const{btnPosition:e,circlePosition:t}=I[z];!function(e=[0,0,.1],t=[0,0,0]){const[o,a,n]=e;g.animate({camera:$,controls:C,newCameraPosition:{x:o,y:a,z:n},newControlsTarget:{x:o-5,y:0,z:n},duration:2}),C.update()}(e)}}}),!1),c((()=>{C=new d($,x.value),C.enableDamping=!0,C.minDistance=.01,C.addEventListener("change",(()=>{k.render(T,$)})),x.value.appendChild(k.domElement),F(),H()})),(e,t)=>(h(),p("div",{class:"container",ref_key:"container",ref:x},null,512))}},[["__scopeId","data-v-884577fe"]]);export{j as default};
