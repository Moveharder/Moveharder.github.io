import{b9 as s,ba as e,bb as t,bc as n}from"./vendor.d2781f4b.js";class o{constructor(e,t=""){this.listener=new s,e.add(this.listener),this.publicPath=t,this.sounds={}}easyLoad(s=!0,e={name:"my_audio",ext:"mp3",url:"",loop:!1,volume:.6,isPositional:!1,onEnd:null}){const{name:t,ext:n="mp3",url:o="",loop:i=!1,volume:l=.6,isPositional:a=!1,onEnd:r=null}=e;return s?this.load(t,n,i,l,a,r):this.loadFromUrl(t,o,i,l,a,r)}load(s,o="mp3",i=!1,l=.6,a=!1,r=null){return new Promise(((u,d)=>{const h=a?new t(this.listener):new e(this.listener);r&&this.bindEvent(h,"onEnded",r),this.sounds[s]=h;(new n).setPath(this.publicPath).load(`${s}.${o}`,(e=>{h.setBuffer(e),h.setLoop(i),h.setVolume(l),a&&h.setRefDistance(20),u({name:s,bufferLength:e.length})}),(s=>{}),(s=>{d(s)}))}))}loadFromUrl(s,o,i=!1,l=.6,a=!1,r=null){return new Promise(((u,d)=>{const h=a?new t(this.listener):new e(this.listener);r&&this.bindEvent(h,"onEnded",r),this.sounds[s]=h;(new n).load(o,(e=>{h.setBuffer(e),h.setLoop(i),h.setVolume(l),a&&h.setRefDistance(20),u({name:s,bufferLength:e.length})}),(s=>{}),(s=>{d(s)}))}))}bindEvent(s,e,t){if("function"!=typeof t)throw new Error("绑定事件的[cb]必须是函数");s[e]=t}setLoop(s,e){let t=this.sounds[s];t&&t.setLoop(e)}setVolume(s,e){let t=this.sounds[s];t&&t.setVolume(e)}play(s){let e=this.sounds[s];e&&!e.isPlaying&&e.play()}pause(s){let e=this.sounds[s];e&&e.isPlaying&&e.pause()}stop(s){let e=this.sounds[s];e&&e.isPlaying&&e.stop()}stopAll(){for(let s in this.sounds)this.stop(s)}onEnd(){}}export{o as S};
