import{ad as e}from"./vendor.d2781f4b.js";class t{constructor(e){this.game=e,this.modelActionsMap={}}createModelActions(t,n,o){let s=new e(n.scene),i={lastAction:""};return n.animations.map((e=>{if(e.name){let t=e.name.toLowerCase();i[t]=s.clipAction(e)}})),this.modelActionsMap[t]=i,o&&s.addEventListener("finished",(e=>o(e))),{mixer:s,actions:i}}toggleModelAction(e={lastAction:""},t){const{lastAction:n}=e;return t!=n&&(n&&e[n].fadeOut(.3),e[t].reset(),e[t].setEffectiveWeight(1),e[t].play(),e[t].fadeIn(.3),e.lastAction=t),e}async playActionQueue(e,t=[],n){let o=+new Date;for(let i=0;i<t.length;i++){const{name:n,delay:o=0}=t[i];await this.sleep(o),e=this.toggleModelAction(e,n)}let s=+new Date;n&&n(s-o)}sleep(e=100){return new Promise((t=>setTimeout(t,e)))}getActions(e){return this.modelActionsMap[e]}destroy(){this.modelActionsMap={}}}export{t as M};
