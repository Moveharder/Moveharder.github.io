import{a6 as e,r as a,S as o,m as n,W as s,a7 as t,A as d,D as i,M as r,n as c,q as l,s as w,t as p,x as m,L as h,a1 as u,I as f,J as v,aE as M,aF as b,b0 as g,b1 as S,b2 as A,b3 as I,K as C,Q as E,af as _,ag as q,c as B,b4 as F,o as T,$ as D}from"./vendor.d2781f4b.js";import{_ as L}from"./index.3fe0440b.js";const W=L({__name:"GravityWorld",setup(L){const W=new e({name:"My GUI"});let k=null,P=a(null),j=[];W.addFolder("Test Field");const G={"生成球体":()=>{!function(e,a){const o=new r(te,de);o.scale.set(e,e,e),o.position.copy(a),o.castShadow=!0,H.add(o);const n=new g(e),s=new S({mass:1,shape:n,material:Z});s.position.copy(a),s.addEventListener("collide",$),Y.addBody(s),j.push({mesh:o,body:s})}(3*Math.random(),{x:8*(Math.random()-.5),y:4,z:8*(Math.random()-.5)})},"生成立方体":()=>{!function(e,a,o,n={x:x,y:y,z:z}){const s=new r(ie,re);s.scale.set(e,a,o),s.position.copy(n),s.castShadow=!0,H.add(s);const t=new F(new A(e/2,a/2,o/2)),d=new S({mass:1,position:new A(0,3,0),shape:t,material:Z});d.position.copy(n),d.addEventListener("collide",$),Y.addBody(d),j.push({mesh:s,body:d})}(3*Math.random(),3*Math.random(),3*Math.random(),{x:10*(Math.random()-.5),y:4,z:10*(Math.random()-.5)})},"播放音效":()=>{$()},"移除物体":()=>{j.map((({mesh:e,body:a})=>{a.removeEventListener("collide",$),Y.removeBody(a),H.remove(e)})),j=[]}};W.add(G,"生成球体"),W.add(G,"生成立方体"),W.add(G,"播放音效"),W.add(G,"移除物体");const H=new o,J=new n(75,window.innerWidth/window.innerHeight,.1,1e3);J.position.set(0,30,30),J.lookAt(0,0,0);const K=new s({antialias:!0});K.setSize(window.innerWidth,window.innerHeight),K.setClearColor("#262837"),K.shadowMap.enabled=!0,K.shadowMap.type=t;const N=new d("#b9d5ff",.5);H.add(N);const Q=new i("#b9d5ff",.5);Q.position.set(2,7,-4),H.add(Q);const U=new r(new c(40,40),new l({color:"#a9c388",side:w,metalness:.6}));U.rotation.x=-Math.PI/2,U.position.y=-.01,U.receiveShadow=!0,U.castShadow=!0,H.add(U);const V=new Audio("sounds/collide.mp3"),$=e=>{if(V.currentTime=0,!e)return void V.play();e.contact.getImpactVelocityAlongNormal()>.5&&(V.volume=Math.random(),V.currentTime=0,V.play())},O=new r(new p(1,32,32),new l({color:"silver",roughness:.3,metalness:.3}));O.position.set(0,8,0),O.castShadow=!0,H.add(O);const R=new r(new m(1,1,1),new h({color:16711680,transparent:!0,opacity:.4}));var X;R.position.set(2,2,-4),R.castShadow=!0,H.add(R),X=R,u.fromTo(X.position,{y:-.5,duration:1,repeat:-1,yoyo:!0,ease:"power2"},{y:.5,duration:1,repeat:-1,yoyo:!0,ease:"power2"}),u.to(X.rotation,{y:Math.PI,duration:1,repeat:-1,onComplete:()=>{}}),J.lookAt(X.position);let Y=new f;Y.boradphase=new v(Y),Y.allowSleep=!0,Y.gravity.set(0,-9.82,0);const Z=new M("default"),ee=new b(Z,Z,{friction:.1,restitution:.7});Y.addContactMaterial(ee),Y.defaultContactMaterial=ee;const ae=new g(1),oe=new S({mass:1,position:new A(0,8,0),shape:ae});Y.addBody(oe);const ne=new I,se=new S;se.mass=0,se.addShape(ne),se.quaternion.setFromAxisAngle(new A(1,0,0),-Math.PI/2),Y.addBody(se);const te=new p(1,32,32),de=new l({color:"silver",roughness:.3,metalness:.3});const ie=new m(1,1,1),re=new l({color:"silver",roughness:.3,metalness:.3});const ce=new D;let le=0;function we(){const e=ce.getElapsedTime(),a=e-le;le=e,Y.step(1/60,a,3),O.position.copy(oe.position),j.map((({mesh:e,body:a})=>{e.position.copy(a.position),e.quaternion.copy(a.quaternion)})),k.update(),K.render(H,J),window.requestAnimationFrame(we)}return C((()=>{k=new E(J,P.value),k.enableDamping=!0,k.minDistance=.01,k.maxDistance=20,H.add(new _(1e3)),H.add(new q(320,32)),P.value.appendChild(K.domElement),we()})),(e,a)=>(T(),B("div",{class:"container",ref_key:"container",ref:P},null,512))}},[["__scopeId","data-v-07a6cdd9"]]);export{W as default};
