import{a6 as e,r as a,G as t,S as n,aP as o,m as s,W as i,A as d,D as c,M as r,n as w,q as h,s as l,x as p,ak as m,aQ as f,aR as M,v as u,ay as S,a9 as y,ad as g,a8 as v,a7 as z,a3 as x,a4 as P,K as b,Q as C,U as A,c as D,a2 as I,V as L,o as E,$ as H}from"./vendor.d2781f4b.js";import{M as W}from"./MoveAndTurnControl.f44fdd62.js";import{_}from"./index.eeadcf8f.js";const j="#262837",F=_({__name:"GhostHouse",setup(_){const F=()=>new I(Math.random(),Math.random(),Math.random()),T=()=>{let e=40*Math.random()-20,a=40*Math.random()-20;return new L(e,-.5,a)},R=new e({name:"My GUI"});let k=null,G=a(null);const U=new t;let q=new W;R.addFolder("Test Field");let O=!1,Q=!1,V=0;const X={"切换旋转":()=>{Q=!Q},"幽灵1视角":()=>{Y(0)},"幽灵2视角":()=>{Y(1)},"幽灵3视角":()=>{Y(2)},"幽灵4视角":()=>{Y(3)},"关闭视角跟随":()=>{O=!1,K.position.x=4,K.position.y=5,K.position.z=12,K.lookAt(0,0,0),k.maxDistance=100}};function Y(e){V=e,k.maxDistance=2,O=!0}R.add(X,"切换旋转"),R.add(X,"幽灵1视角"),R.add(X,"幽灵2视角"),R.add(X,"幽灵3视角"),R.add(X,"幽灵4视角"),R.add(X,"关闭视角跟随");const $=new n;$.fog=new o(j,1,25);const K=new s(75,window.innerWidth/window.innerHeight,.1,1e3);K.position.x=4,K.position.y=5,K.position.z=12,K.lookAt(0,0,0);const B=new i({antialias:!0});B.setSize(window.innerWidth,window.innerHeight),B.physicallyCorrectLights=!0,B.setClearColor(j),B.setPixelRatio(window.devicePixelRatio);const J=new d("#b9d5ff",.5);$.add(J);const N=new c("#b9d5ff",.5);N.position.set(2,7,-4),$.add(N);const Z=new r(new w(40,40),new h({color:"#a9c388",side:l}));Z.rotation.x=-Math.PI/2,Z.position.y=-.01,$.add(Z);const ee=new t;$.add(ee);const ae=1.25,te=new r(new p(4,2.5,4),new h({color:"#ac8e82"}));ee.add(te),ee.position.y=ae;const ne=new r(new m(3.5,1.5,4),new h({color:"#b35f45"}));ee.add(ne),ne.rotation.y=Math.PI/4,ne.position.y=2;const oe=new r(new f(2,2),new h({color:"#aa7b7b"}));oe.position.z=2.01,oe.position.y=-.25,ee.add(oe);const se=new M(1,16,16),ie=new h({color:"#89c854"}),de=new r(se,ie);de.scale.set(.5,.5,.5),de.position.set(.8,-1,2.2);const ce=new r(se,ie);ce.scale.set(.3,.3,.3),ce.position.set(1.4,-1.1,2);const re=new r(se,ie);re.scale.set(.4,.4,.4),re.position.set(-1.4,-1,2.2);const we=new r(se,ie);we.scale.set(.15,.15,.15),we.position.set(-1.6,-1.2,2.6),ee.add(de,ce,re,we);const he=new t;$.add(he);const le=new p(.5,1,.2);for(let e=0;e<50;e++){const a=new r(le,new u({color:F()})),t=Math.random()*Math.PI*2,n=7*Math.random()+4,o=Math.sin(t)*n,s=Math.cos(t)*n;a.position.set(o,.4,s),a.rotation.y=.4*(Math.random()-.5),a.rotation.z=.2*(Math.random()-.5),a.castShadow=!0,a.name=`GRAVE_${e}`,he.add(a)}$.add(U);const pe=new S("#0000ff",10,20);U.add(pe);const me=new S("#00ff00",3,2);U.add(me);const fe=new S("#ff0000",3,2);U.add(fe);const Me=()=>{q.go({target:ye,destPosition:T(),speed:2,onStart:()=>{},onUpdate:()=>{},onComplete:()=>{Me()}})},ue=new y;let Se=null,ye=null;ue.setPath("https://static.fatiaoya.com/front/believer/resources/models/CesiumMan/glTF/").load("CesiumMan.gltf",(e=>{Se=new g(e.scene),Se.clipAction(e.animations[0]).play(),e.scene.traverse((function(e){e.isMesh&&(e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map,e.material.roughness=.2,e.material.metalness=.5,e.material.castShadow=!0)})),ye=e.scene,ye.position.set(0,0,3),ye.scale.set(4,4,4),ye.castShadow=!0,$.add(e.scene),U.add(ye),setTimeout((()=>{Me()}),2e3)}),(e=>{}),(e=>{}));const ge=new S("#ff7d46",20,10);ge.position.set(0,1,3.8),ee.add(ge);let ve=null,ze=null;const xe=new v;xe.setDecoderPath("draco/"),(new y).setDRACOLoader(xe).setPath("https://static.fatiaoya.com/front/believer/resources/models/Lantern/glTF-Draco/").load("Lantern.gltf",(e=>{ve=e.scene,ve.position.set(-2.5,0,2),ve.rotation.set(0,-Math.PI/2,0),ve.scale.set(.1,.1,.1),ve.traverse((e=>{e.castShadow=!0})),ze=ve.clone(),ze.position.set(2.5,0,2),ze.rotation.set(0,-Math.PI/2,0),ze.scale.set(.1,.1,.1),$.add(ve),$.add(ze)}),(e=>{}),(e=>{})),B.shadowMap.enabled=!0,N.castShadow=!0,ge.castShadow=!0,pe.castShadow=!0,me.castShadow=!0,fe.castShadow=!0,te.castShadow=!0,ne.castShadow=!0,de.castShadow=!0,ce.castShadow=!0,re.castShadow=!0,we.castShadow=!0,Z.receiveShadow=!0,B.shadowMap.type=z,ge.shadow.mapSize.width=256,ge.shadow.mapSize.height=256,ge.shadow.camera.far=5,pe.shadow.mapSize.width=256,pe.shadow.mapSize.height=256,pe.shadow.camera.far=5,me.shadow.mapSize.width=256,me.shadow.mapSize.height=256,me.shadow.camera.far=5,fe.shadow.mapSize.width=256,fe.shadow.mapSize.height=256,fe.shadow.camera.far=5;let Pe=new x,be=new P;function Ce(e){"touchstart"==e.type?(be.x=e.touches[0].clientX/window.innerWidth*2-1,be.y=-(e.touches[0].clientY/window.innerHeight*2-1)):(be.x=e.clientX/window.innerWidth*2-1,be.y=-(e.clientY/window.innerHeight*2-1)),Pe.setFromCamera(be,K);let a=Pe.intersectObjects(he.children,!0);if(a.length>0){a[0].object.material.color=F()}}window.addEventListener("mousedown",Ce,!1),window.addEventListener("touchstart",Ce,!1);const Ae=new H;let De=0;function Ie(){Q&&($.rotation.y+=.005);let e=Ae.getElapsedTime();const a=e-De;De=e;let t=.5*e;pe.position.x=4*Math.cos(t),pe.position.z=4*Math.sin(t),pe.position.y=1;let n=.32*-e;me.position.x=5*Math.cos(n),me.position.z=5*Math.sin(n),me.position.y=1;let o=.18*-e;if(fe.position.x=Math.cos(o)*(8+Math.sin(.32*e)),fe.position.z=Math.sin(o)*(8+Math.sin(.5*e)),fe.position.y=Math.sin(2*o)+Math.sin(.5*e),Se&&Se.update(1.5*a),O){let e=U.children[V].position.clone(),a=new L(e.x,e.y+2.5,e.z);k.target.copy(a)}k.update(),B.render($,K),window.requestAnimationFrame(Ie)}const Le=()=>{K.aspect=window.innerWidth/window.innerHeight,K.updateProjectionMatrix(),B.setSize(window.innerWidth,window.innerHeight)};return b((()=>{k=new C(K,G.value),k.enableDamping=!0,k.minDistance=1,k.maxDistance=100,k.maxPolarAngle=Math.PI/2,G.value.appendChild(B.domElement),Ie(),window.addEventListener("resize",(()=>Le))})),A((()=>{window.removeEventListener("resize",Le)})),(e,a)=>(E(),D("div",{class:"container3",ref_key:"container",ref:G},null,512))}},[["__scopeId","data-v-bb5defe0"]]);export{F as default};
